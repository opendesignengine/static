<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Shepard Test Stand - Shepard v1.1 Sample Rate - Open Design Engine</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token"/>
<meta name="csrf-token" content="Lf/lyt8UDhc6eFPBCL2UkkFNSEkw3dEPgYrKkXFHqYI="/>
<link rel='shortcut icon' href='../../../favicon.ico%3F1359925685' />
<link href="../../../stylesheets/application.css%3F1359925542.css" media="all" rel="stylesheet" type="text/css" />

<script src="../../../javascripts/prototype.js%3F1359925542" type="text/javascript"></script>
<script src="../../../javascripts/effects.js%3F1359925542" type="text/javascript"></script>
<script src="../../../javascripts/dragdrop.js%3F1359925542" type="text/javascript"></script>
<script src="../../../javascripts/controls.js%3F1359925542" type="text/javascript"></script>
<script src="../../../javascripts/application.js%3F1359925542" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
Event.observe(window, 'load', function(){ new WarnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>

<!--[if IE 6]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1359925542);}
    </style>
<![endif]-->
<link href="../../../plugin_assets/redmine_legal/stylesheets/terms-of-service.css%3F1359925705.css" media="screen" rel="stylesheet" type="text/css" /> 
<!-- page specific tags -->

  <link href="../../../stylesheets/scm.css%3F1359925542.css" media="screen" rel="stylesheet" type="text/css" />
</head>
<body class="controller-messages action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="../../../login.html" class="login">Sign in</a></li></ul>    </div>
    
    <ul><li><a href="../../../index.html" class="home">Home</a></li>
<li><a href="../../../projects.html" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>

<div id="header">
    
    <div id="quick-search">
        <form action="../../../search/index/shepard-ts.html" method="get">
        <input name="messages" type="hidden" value="1" />
        <a href="../../../search/index/shepard-ts.html" accesskey="4">Search</a>:
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
        </form>
        
    </div>
    

    <h1>Shepard Test Stand</h1>

    
    <div id="main-menu">
        <ul><li><a href="../../../projects/shepard-ts.html" class="overview">Overview</a></li>
<li><a href="../../../projects/shepard-ts/activity.html" class="activity">Activity</a></li>
<li><a href="../../../projects/shepard-ts/roadmap.html" class="roadmap">Roadmap</a></li>
<li><a href="../../../projects/shepard-ts/issues.html" class="issues">Issues</a></li>
<li><a href="../../../projects/shepard-ts/issues/gantt.html" class="gantt">Gantt</a></li>
<li><a href="../../../projects/shepard-ts/news.html" class="news">News</a></li>
<li><a href="../../../dmsf/shepard-ts.html" class="dmsf">DMSF</a></li>
<li><a href="../../../projects/shepard-ts/wiki.html" class="wiki">Wiki</a></li>
<li><a href="../../../projects/shepard-ts/boards.html" class="boards selected">Forums</a></li>
<li><a href="http://opendesignengine.net/projects/shepard-ts/repository" class="repository">Repository</a></li></ul>
    </div>
    
</div>

<div class="nosidebar" id="main">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
				
        <p class="breadcrumb"><a href="../../../projects/shepard-ts/boards.html">Forums</a> » <a href="../../../projects/shepard-ts/boards/4.html">Discussion</a> » </p>

<div class="contextual">
    <span class="message-574-watcher"></span>
    
    
    
</div>

<h2>Shepard v1.1 Sample Rate</h2>

<div class="message">
<p><span class="author">Added by <a href="../../../users/102.html" class="icon icon-contributor-license">Jeremy Wright</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-08-13.html" title="08/13/2013 09:50 pm">about 9 years</a> ago</span></p>
<div class="wiki">
<p>While Aaron, Chris and I were doing some testing last night it was noticed that we're getting a little over 1000 samples per second (SPS) from the Arduino when we're reading both the thrust and temperature sensors. While this is great, and much more than we ever expected to get out of the Arduino, it creates another challenge. Currently we are using the millis function on the Arduino for our time stamps. When you're sampling faster than millisecond resolution, you begin to get time stamp duplicates with this method. Beyond that it seems that the Arduino's ability to handle nanosecond resolutions is unreliable. There have been a few solutions put forth which will require some debate, probably during a hardware Hangout.</p>


	<ol>
	<li>Create the time stamp on the client rather than the Arduino. This is my least favorite option. I'm a proponent of keeping the time stamping as close to the source of the data as possible. Still, it's an option.</li>
		<li>Incrementally add a decimal to the end of the time stamps as they come through. If you got two time stamps with 2256 as their value, the first would be 2256.1 and the second would be 2256.2. This would give you a safety net up through 10 samples in one millisecond.</li>
		<li>"Rev limit" the sample rate so that the most you can have is 1000 SPS. This would probably involve throwing away any duplicate time stamps after the first is received. The idea was also proposed that we could average the values from the duplicate time stamps, but my personal preference would be to do as little manipulation of the data as possible before the users get it.</li>
	</ol>


	<p>There are probably other options, but those are the three that I got out of the conversation. If you have thoughts on time stamping, feel free to contribute them here.</p>
</div>

</div>
<br />


<h3 class="comments">Replies (1)</h3>

  <div class="message reply" id="message-576">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="574%3Fr=576.html#message-576">RE: Shepard v1.1 Sample Rate</a>
    -
    Added by <a href="../../../users/102.html" class="icon icon-contributor-license">Jeremy Wright</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-08-14.html" title="08/14/2013 06:41 am">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>I really wasn't paying attention to when the sample rate jumped from about 250 SPS to over 1000 SPS, but as I glanced through the code this morning I feel it was probably when I shifted the temperature conversion/scaling calculations off onto the client. The Arduino is just reading raw values from the sensors and sending them directly out over serial. That makes for very low overhead and much faster sample rates. I had made some tweaks to the Mach 30 I2C library that may have helped a little too, but couldn't account for that kind of jump.</p></div>
  
  </div>

<p class="pagination"> (1-1/1)</p>








        
				<div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
	
<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="http://www.redmine.org/">Redmine</a> &copy; 2006-2011 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25732509-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> <div id="footer">
  <div class="bgl"><div class="bgr">
    <a href="../../../terms_of_services/574.html">Terms Of Service</a>
  </div></div>
</div>
<div id="footer">
</div>
</body>
</html>
