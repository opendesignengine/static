<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Shepard Test Stand - Calibration and Modification - Open Design Engine</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token"/>
<meta name="csrf-token" content="Lf/lyt8UDhc6eFPBCL2UkkFNSEkw3dEPgYrKkXFHqYI="/>
<link rel='shortcut icon' href='../../../favicon.ico%3F1359925685' />
<link href="../../../stylesheets/application.css%3F1359925542.css" media="all" rel="stylesheet" type="text/css" />

<script src="../../../javascripts/prototype.js%3F1359925542" type="text/javascript"></script>
<script src="../../../javascripts/effects.js%3F1359925542" type="text/javascript"></script>
<script src="../../../javascripts/dragdrop.js%3F1359925542" type="text/javascript"></script>
<script src="../../../javascripts/controls.js%3F1359925542" type="text/javascript"></script>
<script src="../../../javascripts/application.js%3F1359925542" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
Event.observe(window, 'load', function(){ new WarnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>

<!--[if IE 6]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1359925542);}
    </style>
<![endif]-->
<link href="../../../plugin_assets/redmine_legal/stylesheets/terms-of-service.css%3F1359925705.css" media="screen" rel="stylesheet" type="text/css" /> 
<!-- page specific tags -->

  <link href="../../../stylesheets/scm.css%3F1359925542.css" media="screen" rel="stylesheet" type="text/css" />
</head>
<body class="controller-messages action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="../../../login.html" class="login">Sign in</a></li></ul>    </div>
    
    <ul><li><a href="../../../index.html" class="home">Home</a></li>
<li><a href="../../../projects.html" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>

<div id="header">
    
    <div id="quick-search">
        <form action="../../../search/index/shepard-ts.html" method="get">
        <input name="messages" type="hidden" value="1" />
        <a href="../../../search/index/shepard-ts.html" accesskey="4">Search</a>:
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
        </form>
        
    </div>
    

    <h1>Shepard Test Stand</h1>

    
    <div id="main-menu">
        <ul><li><a href="../../../projects/shepard-ts.html" class="overview">Overview</a></li>
<li><a href="../../../projects/shepard-ts/activity.html" class="activity">Activity</a></li>
<li><a href="../../../projects/shepard-ts/roadmap.html" class="roadmap">Roadmap</a></li>
<li><a href="../../../projects/shepard-ts/issues.html" class="issues">Issues</a></li>
<li><a href="../../../projects/shepard-ts/issues/gantt.html" class="gantt">Gantt</a></li>
<li><a href="../../../projects/shepard-ts/news.html" class="news">News</a></li>
<li><a href="../../../dmsf/shepard-ts.html" class="dmsf">DMSF</a></li>
<li><a href="../../../projects/shepard-ts/wiki.html" class="wiki">Wiki</a></li>
<li><a href="../../../projects/shepard-ts/boards.html" class="boards selected">Forums</a></li>
<li><a href="http://opendesignengine.net/projects/shepard-ts/repository" class="repository">Repository</a></li></ul>
    </div>
    
</div>

<div class="nosidebar" id="main">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
				
        <p class="breadcrumb"><a href="../../../projects/shepard-ts/boards.html">Forums</a> » <a href="../../../projects/shepard-ts/boards/4.html">Discussion</a> » </p>

<div class="contextual">
    <span class="message-685-watcher"></span>
    
    
    
</div>

<h2>Calibration and Modification</h2>

<div class="message">
<p><span class="author">Added by <a href="../../../users/193.html" class="icon icon-contributor-license">JC Jones</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-11-25.html" title="11/25/2013 09:33 pm">almost 9 years</a> ago</span></p>
<div class="wiki">
<p>Hello,</p>


	<p>I'm helping my son with a science project on rocket motors. We have constructed a test stand and are trying to use your Arduino setup and software for the recording apparatus. We need to calibrate our load cell and it doesn't look like your Calibration Utility is working yet. How should we go about calibrating the setup so that we're getting accurate readings. Also, we also need to modify the scale of the measurements to accommodate higher thrust loads.</p>


	<p>Thanks for your help,</p>


	<p>John</p>
</div>

</div>
<br />


<h3 class="comments">Replies (12)</h3>

  <div class="message reply" id="message-686">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="685%3Fr=686.html#message-686">RE: Calibration and Modification</a>
    -
    Added by <a href="../../../users/102.html" class="icon icon-contributor-license">Jeremy Wright</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-11-26.html" title="11/26/2013 06:15 am">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>Hi John,</p>


	<p>Glad to hear that you and your son are doing a rocket science project.</p>


	<p>What version of the software are you running? The version 1.0 DAQ software <a href="https://opendesignengine.net/dmsf/shepard-ts?folder_id=16" class="external">here</a> is very outdated. It would be best to check the current version out from the <a href="https://opendesignengine.net/projects/shepard-ts/repository" class="external">repository</a> if you haven't done so already.</p>


	<p>Also, what version of the circuit did you build? There are known issues with the version in the wiki that has been outlined in the forums and in the errata. We're currently in-between versions, and our latest circuit and procedures can be found in the <a href="https://opendesignengine.net/news/34" class="external">dev logs</a> . Skip down to "6 months ago" (the entry from 06-10-13 that starts with the Arduino Fritzing diagram). Make sure that you read the rest of the dev log all the way through since they're project notes and there will probably be some missteps that you'll want to avoid. The circuit outlined there will be your best bet to get good readings from your load cell. The circuit is also a very quick build. The calibration procedure that we're using right now is outlined as well. The calibration is very manual right now, but it works and has given us thrust curves that match the Estes motor documentation.</p>


	<p>Please let me know if you need any other help.</p></div>
  
  </div>

  <div class="message reply" id="message-688">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="685%3Fr=688.html#message-688">RE: Calibration and Modification</a>
    -
    Added by <a href="../../../users/193.html" class="icon icon-contributor-license">JC Jones</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-11-30.html" title="11/30/2013 10:05 am">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>Thanks Jeremy,</p>


	<p>That helped. He rebuild the board to the version you pointed us to and that seems to be working better. We're now working on getting it calibrated. We expanded the range of readings to 100 newtons (we'll be testing larger motors) but for some reason the readings are toping out at about 42 newtons no matter where the potentiometer is set.</p>


	<p>John &#38; Christopher</p></div>
  
  </div>

  <div class="message reply" id="message-689">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="685%3Fr=689.html#message-689">RE: Calibration and Modification</a>
    -
    Added by <a href="../../../users/102.html" class="icon icon-contributor-license">Jeremy Wright</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-11-30.html" title="11/30/2013 01:13 pm">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>John and Christopher. Can you post a link to the load cell you're using? I'm a little surprised that you couldn't squeeze 100 N out of the circuit, but my suspicion is that we can tweak the resistor network a little to get it working.</p></div>
  
  </div>

  <div class="message reply" id="message-690">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="685%3Fr=690.html#message-690">RE: Calibration and Modification</a>
    -
    Added by <a href="../../../users/193.html" class="icon icon-contributor-license">JC Jones</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-11-30.html" title="11/30/2013 01:30 pm">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>Jeremy,</p>


	<p>It's this one: <a class="external" href="http://aeroconsystems.com/cart/load-cells/20-50-100-kg-load-cell/">http://aeroconsystems.com/cart/load-cells/20-50-100-kg-load-cell/</a> (the 50kG version).</p>


	<p>Thanks,</p>


	<p>J</p></div>
  
  </div>

  <div class="message reply" id="message-691">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="685%3Fr=691.html#message-691">RE: Calibration and Modification</a>
    -
    Added by <a href="../../../users/193.html" class="icon icon-contributor-license">JC Jones</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-11-30.html" title="11/30/2013 04:00 pm">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>Actually, that value seems to correspond with the 9.5 lbs. you mentioned in the calibration section. Can that be reset? Also, while I see where to enter the calibration formula in the sketch, I am completely at a loss as to how to create it. Could you tell me how that's done?</p>


	<p>Thanks,</p>


	<p>John &#38; Christopher<br />(BTW you can see some of our rocketry activity at jonesboysrocketry.info)</p></div>
  
  </div>

  <div class="message reply" id="message-692">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="685%3Fr=692.html#message-692">RE: Calibration and Modification</a>
    -
    Added by <a href="../../../users/102.html" class="icon icon-contributor-license">Jeremy Wright</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-11-30.html" title="11/30/2013 09:30 pm">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>John and Christopher,</p>


	<p>The main user interface (Processing) sketch will max out at around 9.5 lbs, but if you click the "Enable Recording" button, push on the load cell, click the enable/disable recording button again and look at the csv data file that's created, you should get the true values. The raw value (0 - 1023) in the calibration app should tell you if you're really topping out as well.</p>


	<p>The <a href="https://opendesignengine.net/news/34" class="external">dev log</a> has some information on calibration starting with the entry on 06-11-13 (look for the the Calibration_Util_Processing screen shot with the points on it).</p>


	<p>The way I would start is to:</p>


	<ol>
	<li>Load your load cell with about 1.4 times your expected max thrust, and then try use the trim pot (variable resistor) to set the raw value max to somewhere between 1000 and 1023 in the calibration utility. You'll have to play around with the trim pot to make sure you're on the edge of maxing out without actually maxing out. If the raw value maxes out before you get to 100 N no matter what the trim pot is set to, we'll have to break out the slide rules and breadboards.</li>
		<li>Run through a calibration using about 0.5 lb increments. You can use smaller increments, but I would wait until you make sure the calibration process is working before you spend the time on that. I use jugs of water for rough calibrations.</li>
		<li>Transfer the raw vs weight values into Excel or Libre Office. Sorry, I think the current version of the UI doesn't allow copy and paste and is a pain. If you get an outlier for the last calibration point like I did in the dev log screen shot, you can adjust your max value high enough so that you can get a clean line throughout the range you want.</li>
		<li>Create an X-Y Scatter plot of the raw vs weight values in Excel or Libre Office Calc.</li>
		<li>Fit a line to the points and display the equation for that line. This will give you the equation of a line that you can put into the sketch.</li>
	</ol>


	<p>Do you mind if I post about your website and interest in Shepard's DAQ system to Google+ and Twitter?</p></div>
  
  </div>

  <div class="message reply" id="message-693">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="685%3Fr=693.html#message-693">RE: Calibration and Modification</a>
    -
    Added by <a href="../../../users/193.html" class="icon icon-contributor-license">JC Jones</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-11-30.html" title="11/30/2013 09:54 pm">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>Thanks Jeremy,</p>


	<p>I'll give that a try. Right now the calibration Utility is not giving me any reading… not sure why. It'll have to wait until tomorrow.</p>


	<p>Feel free to post about our website!</p>


	<p>Thanks again,</p>


	<p>John &#38; Christopher</p></div>
  
  </div>

  <div class="message reply" id="message-694">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="685%3Fr=694.html#message-694">RE: Calibration and Modification</a>
    -
    Added by <a href="../../../users/102.html" class="icon icon-contributor-license">Jeremy Wright</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-11-30.html" title="11/30/2013 10:01 pm">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>In case you haven't done this already - If you don't have the temperature sensor hooked up (or if there's a lose connection), the Arduino's code execution will stall and you won't get any thrust readings. The following two lines should be in ShepardDCS_Arduino.ino:</p>


<pre>
tempValue = i2cInterface.get_celcius_temp(OBJECT_TEMP);
//tempValue = -27313;
</pre>

	<p>If you comment the first line and uncomment the second it will keep the temperature sensor from stopping the execution of the code.</p></div>
  
  </div>

  <div class="message reply" id="message-695">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="685%3Fr=695.html#message-695">RE: Calibration and Modification</a>
    -
    Added by <a href="../../../users/193.html" class="icon icon-contributor-license">JC Jones</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-12-01.html" title="12/01/2013 11:55 am">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>Thanks Jeremy,</p>


	<p>We had commented out the first line but left the second commented as well. I rectified that but still not getting a signal in the calibration software. Is there a newer version than the one in the v1 distribution? We're still using that and it hasn't worked since we changed to the v1.1 circuit.</p>


	<p>John</p></div>
  
  </div>

  <div class="message reply" id="message-696">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="685%3Fr=696.html#message-696">RE: Calibration and Modification</a>
    -
    Added by <a href="../../../users/193.html" class="icon icon-contributor-license">JC Jones</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-12-01.html" title="12/01/2013 01:27 pm">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>Nevermind... I found it. Duh moment!</p>


	<p>J</p></div>
  
  </div>

  <div class="message reply" id="message-697">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="685%3Fr=697.html#message-697">RE: Calibration and Modification</a>
    -
    Added by <a href="../../../users/193.html" class="icon icon-contributor-license">JC Jones</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-12-01.html" title="12/01/2013 06:47 pm">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>Jeremy,</p>


	<p>Thanks for all you help. We were able to get everything working and calibrated. We should be ready for a test fire once we get the components mounted.</p>


	<p>John</p></div>
  
  </div>

  <div class="message reply" id="message-698">
    <div class="contextual">
      
      
      
    </div>
  <h4>
  	
    <a href="685%3Fr=698.html#message-698">RE: Calibration and Modification</a>
    -
    Added by <a href="../../../users/102.html" class="icon icon-contributor-license">Jeremy Wright</a> <a href="../../../projects/shepard-ts/activity%3Ffrom=2013-12-01.html" title="12/01/2013 06:55 pm">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>That's great! Glad to hear it.</p>


	<p>Please let us know if you have any more questions. Also, feel free to post about your progress and results here in the forums.</p></div>
  
  </div>

<p class="pagination"> (1-12/12)</p>








        
				<div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
	
<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="http://www.redmine.org/">Redmine</a> &copy; 2006-2011 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25732509-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> <div id="footer">
  <div class="bgl"><div class="bgr">
    <a href="../../../terms_of_services/685.html">Terms Of Service</a>
  </div></div>
</div>
<div id="footer">
</div>
</body>
</html>
